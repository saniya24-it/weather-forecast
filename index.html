<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weather Forecast</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<<head>
<meta charset="UTF-8">
<title>Smart Weather Forecast Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  background: linear-gradient(135deg, #0b1220, #020617);
  color: #e5e7eb;
}

.dashboard {
  display: flex;
  min-height: 100vh;
}

/* Sidebar */
.sidebar {
  width: 70px;
  background: #020617;
  display: flex;
  flex-direction: column;   /* üëà THIS IS THE KEY */
  align-items: center;
  padding: 20px 0;
  gap: 20px;                /* space between icons */
}

.sidebar a {
  font-size: 22px;
  cursor: pointer;
  color: #9ca3af;
  transition: transform 0.2s, color 0.2s;
}

.sidebar a:hover {
  transform: scale(1.2);
  color: #6366f1;
}



/* Main */
.main {
  flex: 1;
  padding: 20px;
}

/* Top bar */
.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.search-box {
  display: flex;
  gap: 10px;
  align-items: center;
}

.search-box input {
  width: 260px;
  padding: 10px 14px;
  border-radius: 20px;
  border: none;
  background: #111827;
  color: white;
}

.search-box button {
  padding: 10px 18px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background: #6366f1;
  color: white;
  font-weight: 600;
}

.logout {
  background: #ef4444;
  border: none;
  color: white;
  padding: 6px 12px;
  border-radius: 14px;
  cursor: pointer;
}

/* Cards */
.card {
  height: auto;
  background: #0f172a;
  border-radius: 20px;
  padding: 20px;
  margin-bottom: 20px;
}

.date {
  font-size: 14px;
  color: #9ca3af;
  margin-bottom: 10px;
}

.content {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
}

.temp {
  font-size: 56px;
  font-weight: bold;
}

.other-cities {
  background: #0f172a;
}

.other-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.other-header small {
  opacity: 0.6;
  cursor: pointer;
}

.cities-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.city-card {
  background: #020617;
  border-radius: 16px;
  padding: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.city-card h4 {
  font-size: 16px;
}

.city-card span {
  font-size: 12px;
  opacity: 0.6;
}

.city-temp {
  font-size: 20px;
  font-weight: bold;
}

.city-card img {
  width: 40px;
}

/* Today / Week Section */
.today-week {
  display: flex;
  gap: 20px;
}

.tw-left {
  flex: 3;
}

.tw-right {
  flex: 1;
  background: #020617;
  border-radius: 16px;
  padding: 16px;
  text-align: center;
}

.hourly {
  display: flex;
  gap: 10px;
  margin: 12px 0;
}

.hour-card {
  background: #020617;
  padding: 10px;
  border-radius: 14px;
  text-align: center;
  width: 70px;
  font-size: 13px;
}

.hour-card img {
  width: 35px;
}

.tomorrow {
  margin-top: 12px;
  background: #020617;
  border-radius: 16px;
  padding: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  height: 150px;
}

/* LIGHT MODE */
body.light {
  background: linear-gradient(135deg, #f8fafc, #e5e7eb);
  color: #020617;
}

body.light .card,
body.light .other-cities {
  background: #ffffff;
  color: #020617;
}

body.light .sidebar {
  background: #e5e7eb;
}

body.light .search-box input {
  background: #ffffff;
  color: #020617;
}

body.light .city-card,
body.light .hour-card,
body.light .tw-right,
body.light .tomorrow {
  background: #f1f5f9;
}

body.light .logout {
  background: #dc2626;
  color: white;
}

#indiaMap {
  height: 450px !important;
  width: 100%;
  border-radius: 16px;
}

.map-card {
  grid-column: 1 / -1; /* span full grid width */
}
.news-section {
  margin: 20px;
}

.news-header {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 12px;
}

.live-badge {
  background: #ef4444;
  color: white;
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 12px;
  margin-left: 8px;
  animation: pulse 1.2s infinite;
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: .6; }
  100% { opacity: 1; }
}

.news-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 16px;
}

.news-card {
  background: #020617;
  border-radius: 16px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s;
}

.news-card:hover {
  transform: scale(1.03);
}

.news-thumb {
  position: relative;
}

.news-thumb img {
  width: 100%;
  display: block;
}

.play-btn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.6);
  color: white;
  font-size: 28px;
  padding: 10px 16px;
  border-radius: 50%;
}

.news-info {
  padding: 12px;
}

.news-title {
  font-size: 14px;
  font-weight: 600;
}

.news-date {
  font-size: 12px;
  opacity: 0.6;
  margin-top: 4px;
}

.news-tag {
  position: absolute;
  top: 8px;
  left: 8px;
  background: #2563eb;
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 12px;
}

.ad-news {
  cursor: pointer;
}

.ad-label {
  font-size: 12px;
  font-weight: 700;
  color: #2563eb;
  margin-bottom: 10px;
}

.news-article {
  background: #020617;
  border-radius: 16px;
  padding: 18px;
  transition: background 0.3s;
  animation: fade 0.5s ease;
}

.news-article:hover {
  background: #111827;
}

.news-article h3 {
  font-size: 18px;
  margin: 8px 0;
}

.news-article p {
  font-size: 14px;
  opacity: 0.85;
}

.news-article small {
  display: block;
  margin-top: 10px;
  opacity: 0.6;
}

.news-badge {
  background: #ef4444;
  color: white;
  font-size: 11px;
  padding: 3px 10px;
  border-radius: 12px;
  font-weight: 600;
}

@keyframes fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Light mode support */
body.light .news-article {
  background: #f1f5f9;
}


/* Light mode */
body.light .news-card {
  background: #f1f5f9;
}

body.light .news-tag {
  background: #020617;
}
/* ================= CINEMATIC CLIMATE SECTION ================= */

.climate-section {
  position: relative;
  padding: 180px 60px;
  text-align: center;
  overflow: hidden;
  background: radial-gradient(circle at 50% 30%, #111c33, #0f172a 60%);
  border-top: 1px solid rgba(255,255,255,0.05);
}

/* Dark cinematic overlay */

.cinematic-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.6));
  z-index: 1;
}

/* Moving light beam */

.light-beam {
  position: absolute;
  top: -50%;
  left: -30%;
  width: 160%;
  height: 200%;
  background: radial-gradient(circle, rgba(59,130,246,0.15), transparent 60%);
  animation: beamMove 18s linear infinite;
  z-index: 1;
}

@keyframes beamMove {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.climate-content {
  position: relative;
  z-index: 2;
  max-width: 1100px;
  margin: 0 auto;
}

.climate-content h2 {
  font-size: 48px;
  font-weight: 600;
  margin-bottom: 24px;
  letter-spacing: -1px;
}

.climate-content p {
  font-size: 18px;
  color: #94a3b8;
  margin-bottom: 100px;
  line-height: 1.7;
}

/* Stats */

.climate-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 50px;
  margin-bottom: 100px;
}

.stat-card {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 40px 30px;
  border-radius: 16px;
  backdrop-filter: blur(8px);
  transition: 400ms ease;
}

.stat-card:hover {
  transform: translateY(-10px);
  background: rgba(255,255,255,0.08);
}

.stat-card h3 {
  font-size: 36px;
  margin-bottom: 8px;
}

.stat-card span {
  font-size: 13px;
  color: #94a3b8;
}

/* Alert pulse */

.pulse-alert h3 {
  animation: pulseGlow 2s infinite ease-in-out;
}

@keyframes pulseGlow {
  0% { text-shadow: 0 0 0px rgba(239,68,68,0); }
  50% { text-shadow: 0 0 15px rgba(239,68,68,0.6); }
  100% { text-shadow: 0 0 0px rgba(239,68,68,0); }
}

/* CTA cinematic underline */

.climate-cta {
  position: relative;
  font-weight: 600;
  font-size: 17px;
  text-decoration: none;
  color: #3b82f6;
}

.climate-cta::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -8px;
  width: 0%;
  height: 2px;
  background: linear-gradient(to right, #3b82f6, #6366f1);
  transition: 400ms ease;
}

.climate-cta:hover::after {
  width: 100%;
}

/* Reveal animation */

.reveal {
  opacity: 0;
  transform: translateY(60px);
  transition: 800ms ease;
}

.reveal.active {
  opacity: 1;
  transform: translateY(0);
}

/* Responsive */

@media (max-width: 768px) {
  .climate-stats {
    grid-template-columns: repeat(2, 1fr);
    gap: 40px;
  }
}


/* ================= MOBILE RESPONSIVE ================= */
@media (max-width: 1024px) {
  .content {
    grid-template-columns: 1fr;
  }
}

/* Tablets & Phones */
@media (max-width: 768px) {

  body {
    overflow-x: hidden;
  }

  /* DASHBOARD */
  .dashboard {
    flex-direction: column;
  }

  /* SIDEBAR ‚Üí TOP BAR */
  .sidebar {
    width: 100%;
    height: 60px;
    flex-direction: row;
    justify-content: space-around;
    padding: 10px;
  }

  .sidebar a {
    font-size: 20px;
  }

  /* MAIN */
  .main {
    padding: 14px;
  }

  /* TOP BAR */
  .topbar {
    flex-direction: column;
    gap: 12px;
  }

  .search-box {
    width: 100%;
  }

  .search-box input {
    width: 100%;
  }

  /* CARDS */
  .card {
    padding: 16px;
    border-radius: 16px;
  }

  .temp {
    font-size: 42px;
  }

  /* TODAY / WEEK */
  .today-week {
    flex-direction: column;
  }

  .hourly {
    overflow-x: auto;
  }

  /* OTHER CITIES */
  .cities-grid {
    grid-template-columns: 1fr;
  }

  /* MAP */
  #indiaMap {
    height: 320px !important;
  }

  /* NEWS */
  .news-grid {
    grid-template-columns: 1fr;
  }

  /* FORMS */
  input, textarea, button {
    font-size: 16px;
  }
}

/* Small Phones */
@media (max-width: 480px) {

  h1, h2, h3 {
    font-size: 18px;
  }

  .temp {
    font-size: 36px;
  }

  .sidebar a {
    font-size: 18px;
  }

  .hour-card {
    width: 60px;
    font-size: 12px;
  }

  .alert-box {
    width: 90%;
  }
}

/* ================= MODERN NEON GRADIENT + CLEAN + PROFESSIONAL ================= */
:root{
  --bg-gradient: radial-gradient(circle at 50% 100%, #001026 0%, #000814 40%, #00040d 100%);
  --glass-bg: rgba(255,255,255,0.03);
  --glass-border: rgba(0,200,255,0.22);
  --text-main:#e3e9ff;
  --text-sub:#cfd9ff;
  --button-bg:#3a7bd5;
  --button-hover:#2a5fc9;
  --accent:#6acbff;
}

[data-theme="light"]{
  --bg-gradient: linear-gradient(135deg,#dbeafe,#e0f0ff,#ffffff);
  --glass-bg: rgba(255,255,255,0.6);
  --glass-border: rgba(255,255,255,0.85);
  --text-main:#0b1a35;
  --text-sub:#54617a;
  --button-bg:#3b6eea;
  --button-hover:#295bcc;
  --accent:#3b6eea;
}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:var(--bg-gradient);
  font-family:-apple-system, "SF Pro Display", system-ui;
  color:var(--text-main);
  overflow:hidden;
  position:relative;
}

/* SMOOTH COLOR MOTION */
.aurora{
  position:absolute;
  width:160%;
  height:40vh;
  top:30%;
  left:-10%;
  transform:translateX(-50%);
  background:linear-gradient(90deg,#3a7bd5 0%,#6a00ff 50%,#00eaff 100%);
  opacity:0.55;
  filter:blur(40px);
  animation:neonLine 6s infinite alternate ease-in-out;
}
@keyframes neonLine{
  0%{transform:translateX(-50%) translateX(-10%) scale(1)}
  100%{transform:translateX(-50%) translateX(10%) scale(1.1)}
}
@keyframes neonLine{
  0%{transform:translateX(-10%) scale(1)}
  100%{transform:translateX(10%) scale(1.1)}
}
@keyframes neonFlow{
  0%{transform:translate(-8%,-4%) scale(1)}
  100%{transform:translate(8%,4%) scale(1.15)}
}
@keyframes moveGlow{0%{transform:translate(-5%,-5%)}100%{transform:translate(5%,5%)}}

/* MAIN CARD */
.container{
  transform:translateX(250px) translateY(25px);
  box-shadow:0 0 22px rgba(0,200,255,0.25), 0 0 60px rgba(140,0,255,0.18);
  width:auto; max-width:540px; margin:auto;
  padding:34px 26px;
  border-radius:26px;
  background:var(--glass-bg);
  border:1.3px solid var(--glass-border);
  backdrop-filter:blur(22px);
  -webkit-backdrop-filter:blur(22px);
  box-shadow:0 20px 50px rgba(0,0,0,0.35);
  text-align:center;
  animation:fadeUp .9s ease forwards;
  opacity:0;transform:translateY(25px);
}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}

/* WEATHER ICON ‚Äî CLEAN + MODERN */
.weather-icon{
  width:80px;height:80px;margin:0 auto 18px auto;position:relative;
}
.sun{
  position:absolute;top:14px;left:50%;transform:translateX(-50%);
  width:45px;height:45px;border-radius:50%;
  background:#ffd85e;
  box-shadow:0 0 14px rgba(255,220,120,0.7);
  animation:spin 8s linear infinite;
}
@keyframes spin{to{transform:translateX(-50%) rotate(360deg)}}
.cloud{
  position:absolute;bottom:6px;left:50%;transform:translateX(-50%);
  width:75px;height:35px;background:white;border-radius:40px;
  animation:float 3.5s ease-in-out infinite;
}
@keyframes float{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-6px)}}

h1{
  font-size:32px;font-weight:800;margin-bottom:12px;
}

p{
  font-size:15px;line-height:1.55;color:var(--text-sub);
  max-width:420px;margin:0 auto 32px auto;
}

.buttons{
  display:flex;justify-content:center;gap:16px;flex-wrap:wrap;
}
.buttons a{
  padding:12px 28px;border-radius:12px;text-decoration:none;
  background:var(--button-bg);color:white;
  font-size:16px;font-weight:600;
  transition:.25s;
  box-shadow:0 6px 22px rgba(0,0,0,0.28);
}
.buttons a:hover{transform:translateY(-4px);background:var(--button-hover)}

/* THEME BUTTON */
.theme-toggle{
  position:fixed;top:20px;right:20px;
  background:var(--glass-bg);
  border:1.3px solid var(--glass-border);
  backdrop-filter:blur(12px);
  padding:10px 12px;border-radius:50%;font-size:20px;
  cursor:pointer;color:var(--accent);
}

/* RESPONSIVE */
@media(min-width:900px){
  .container{max-width:640px;padding:40px 30px;}
  h1{font-size:38px}
  p{font-size:17px}
  .buttons a{padding:14px 32px;font-size:17px}
}

@media(max-width:420px){
  h1{font-size:26px}
  .weather-icon{width:70px;height:70px}
  .buttons a{width:100%;text-align:center}
}
</style>
</head>
</head>

<body>

<!-- ================= LOADER SECTION ================= -->
<div id="loaderSection" style="position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:#020617; z-index:9999; flex-direction:column;">

  <div class="loader-box">
  <div class="weather-icon"></div>

  <div class="semi-circle">
    <div class="progress" id="progress"></div>
  </div>

  <div class="percent" id="percent">0%</div>
  <div class="status" id="status">Detecting weather...</div>
</div>
</div>


<!-- ================= INTRO SECTION ================= -->
<div id="introSection" style="display:none; position:fixed; inset:0; z-index:9998;">

  <div class="aurora"></div>

<button class="theme-toggle" id="themeToggle">üåô</button>

<div class="container">
  <div class="weather-icon">
    <div class="sun"></div>
    <div class="cloud"></div>
  </div>

  <h1>Weather Forecast</h1>
  <p>Accurate weather reports with a clean, modern neon gradient interface for a fresh experience.</p>

  <div class="buttons">
    <a href="login.html">Login</a>
    <a href="signup.html">Sign Up</a>
  </div>
</div>

<script>
const root=document.documentElement;
const toggle=document.getElementById("themeToggle");
let theme=localStorage.getItem("theme")||"dark";
applyTheme(theme);

function applyTheme(mode){
  root.setAttribute("data-theme",mode);
  localStorage.setItem("theme",mode);
  toggle.textContent = mode==="light" ? "‚òÄÔ∏è" : "üåô";
}

toggle.addEventListener("click",()=>{
  theme = theme==="light" ? "dark" : "light";
  applyTheme(theme);
});
</script>
</div>


<!-- ================= DASHBOARD SECTION ================= -->
<div id="dashboardSection" style="display:none;">

  <
<div class="dashboard">

  <div class="sidebar">
  <a title="Home" href="home.html" style="text-decoration: none;">üè†</a>
  <a title="Disaster Alert" href="disaster.html" style="text-decoration: none;">‚ö†Ô∏è</a>
  <a title="About Us" href="About.html" style="text-decoration: none;">‚ÑπÔ∏è</a>
  <a title="Donation" href="donation.html" style="text-decoration: none;">‚ù§Ô∏è</a>
  <a title="Event" href="Event.html"style="text-decoration: none;">üìÖ</a>
  <a title="Feedback" href="Feedback.html" style="text-decoration: none;">üí¨</a>
</div>




  <div class="main">

       <div class="topbar" style="grid-column: 1 / -1;">
      <div class="search-box">
        <input id="cityInput" placeholder="Enter city (e.g. Mumbai)">
        
        <button onclick="getWeather()">Search</button>
        
      </div>

      <div style="display:flex; gap:10px; align-items:center;">
        <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
        <button class="logout" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="content">

      <!-- LEFT -->
      <div>
        <div class="card">
          <h2 id="city">--</h2>
          <p id="date" class="date"></p>
          <div class="temp" id="temp">--¬∞C</div>
          <p id="desc">--</p>
          <small id="feels">Feels like --¬∞C</small>
        </div>

        <!-- TODAY / WEEK -->
        <div class="card today-week">
          <div class="tw-left">
            <h3>Today / Week</h3>
            <div class="hourly" id="hourly"></div>

            <div class="tomorrow">
              <div>
                <small>Tomorrow</small>
                <h2 id="tomorrowTemp">--¬∞</h2>
                <p id="tomorrowDesc">--</p>
              </div>
              <div>‚õà</div>
            </div>
          </div>

          <div class="tw-right">
            <h4>Sunrise</h4>
            <p id="sunrise">--:--</p>
            <h4>Sunset</h4>
            <p id="sunset">--:--</p>
            <small id="dayLength">--h --m</small>
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div>
        <div class="card">
          <h3>Today Highlights</h3>
          <div class="grid">
            <div id="humidity">üíß Humidity: --%</div>
            <div id="wind">üå¨ Wind: -- km/h</div>
            <div id="pressure">‚è± Pressure: -- hPa</div>
            <div id="visibility">üëÅ Visibility: -- km</div>
          </div>
        </div>
         <div class="card other-cities">
  <div class="other-header">
    <h3>Other Cities</h3>
    <small>Show All</small>
  </div>

  <div class="cities-grid">
    <div class="city-card" id="city1"></div>
    <div class="city-card" id="city2"></div>
    <div class="city-card" id="city3"></div>
    <div class="city-card" id="city4"></div>
  </div>
</div>
</div>
</div>
<!-- INDIA MAP SECTION -->
<div class="card">
  <h3>India Weather & Disaster Map</h3>
  <div id="indiaMap"></div>
</div>
<div class="card news-section">
  <div class="news-header">
    üå¶ Weather News & Live Updates <span class="live-badge">LIVE</span>
  </div>

  <div class="news-grid" id="newsGrid"></div>


<div class="card ad-news">
  <div class="ad-label">üì∞ WEATHER NEWS ‚Ä¢ INDIA</div>

  <div class="news-article" onclick="openArticle(activeArticle.link)">
    <span class="news-badge" id="newsBadge"></span>
    <h3 id="newsTitle"></h3>
    <p id="newsDesc"></p>
    <small id="newsDate"></small>
  </div>
</div>
<section class="climate-section" id="climateSection">

  <div class="cinematic-overlay"></div>
  <div class="light-beam"></div>

  <div class="climate-content">

    <h2 class="reveal">Climate Intelligence. Elevated.</h2>

    <p class="reveal">
      Real-time environmental monitoring across regions.
      AI-driven forecasting powered by live atmospheric data.
    </p>

    <div class="climate-stats">

      <div class="stat-card reveal">
        <h3 class="counter" data-target="120">0</h3>
        <span>Cities Monitored</span>
      </div>

      <div class="stat-card reveal">
        <h3 class="counter" data-target="98">0</h3>
        <span>Forecast Accuracy %</span>
      </div>

      <div class="stat-card reveal">
        <h3 id="liveTime">--:--</h3>
        <span>Live System Time</span>
      </div>

      <div class="stat-card reveal pulse-alert">
        <h3 id="activeAlerts">0</h3>
        <span>Active Alerts</span>
      </div>

    </div>

    <a href="#" class="climate-cta reveal">Explore Global Forecast</a>

  </div>
</section>

<footer class="footer-minimal">
  ¬© 2026 WeatherScope AI ‚Äî Climate Intelligence Platform
</footer>


</div>

</div>



<!-- ================= FLOW CONTROL SCRIPT ================= -->
<script>

/* ================= LOADER LOGIC (UNCHANGED, JUST MODIFIED REDIRECT) ================= */

let percent = 0;
const progress = document.getElementById("progress");
const percentText = document.getElementById("percent");

const loader = setInterval(() => {
  percent++;
  percentText.textContent = percent + "%";
  progress.style.transform = `rotate(${percent * 1.8}deg)`;

  if (percent >= 100) {
    clearInterval(loader);

    document.getElementById("loaderSection").style.display = "none";
    document.getElementById("introSection").style.display = "flex";

    setTimeout(() => {
      document.getElementById("introSection").style.display = "none";
      document.getElementById("dashboardSection").style.display = "block";
    }, 1000000);

  }
}, 25);

</script>


<script>
/* ================= CONFIG ================= */
const API_KEY = "9a7b56b6f5b919658a75bca363637638";

/* ================= OTHER CITIES ================= */
async function loadOtherCities() {
  const cities = [
    { name: "Delhi", label: "India", id: "city1" },
    { name: "Mumbai", label: "India", id: "city2" },
    { name: "Bengaluru", label: "India", id: "city3" },
    { name: "Chennai", label: "India", id: "city4" }
  ];

  for (let city of cities) {
    const res = await fetch(
      `https://api.openweathermap.org/data/2.5/weather?q=${city.name},IN&units=metric&appid=${API_KEY}`
    );
    const data = await res.json();

    document.getElementById(city.id).innerHTML = `
      <div>
        <div class="city-temp">${Math.round(data.main.temp)}¬∞</div>
        <h4>${city.name}</h4>
        <span>${city.label}</span>
      </div>
      <img src="https://openweathermap.org/img/wn/${data.weather[0].icon}.png">
    `;
  }
}

/* ================= MAP ================= */
let map, cityMarker;

function initIndiaMap() {
  map = L.map("indiaMap", {
    center: [22.5937, 78.9629],
    zoom: 5,
    minZoom: 4,
    maxZoom: 7,
    maxBounds: [[6.5, 68.0], [37.5, 97.5]],
    maxBoundsViscosity: 1
  });

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution: "¬© OpenStreetMap contributors"
  }).addTo(map);

  setTimeout(() => map.invalidateSize(), 300);

  addIndianCityMarkers();
  addDisasterMarkers();
}

function updateMap(lat, lon, city) {
  if (!map) return;
  if (cityMarker) map.removeLayer(cityMarker);

  cityMarker = L.marker([lat, lon])
    .addTo(map)
    .bindPopup(`<b>${city}</b>`)
    .openPopup();

  map.setView([lat, lon], 6);
}

function addIndianCityMarkers() {
  [
    ["Delhi", 28.61, 77.21],
    ["Mumbai", 19.07, 72.87],
    ["Bengaluru", 12.97, 77.59],
    ["Chennai", 13.08, 80.27],
    ["Kolkata", 22.57, 88.36]
  ].forEach(c =>
    L.marker([c[1], c[2]]).addTo(map).bindPopup(c[0])
  );
}

function addDisasterMarkers() {
  [
    ["Flood Alert", 26.85, 80.95],
    ["Cyclone Alert", 15.49, 73.82],
    ["Heatwave Alert", 23.25, 77.41]
  ].forEach(a =>
    L.circleMarker([a[1], a[2]], {
      radius: 10,
      color: "red",
      fillColor: "red",
      fillOpacity: 0.6
    }).addTo(map).bindPopup("‚ö†Ô∏è " + a[0])
  );
}
const districtList = [
  { name: "Mumbai Suburban", lat: 19.0760, lon: 72.8777 },
  { name: "Pune District", lat: 18.5204, lon: 73.8567 },
  { name: "Nagpur District", lat: 21.1458, lon: 79.0882 }
];

async function loadDistrictWeather() {
  let html = "";

  for (let d of districtList) {
    const res = await fetch(
      `https://api.openweathermap.org/data/2.5/weather?lat=${d.lat}&lon=${d.lon}&units=metric&appid=${API_KEY}`
    );
    const data = await res.json();

    html += `
      <p>
        <strong>${d.name}</strong> :
        ${Math.round(data.main.temp)}¬∞C,
        ${data.weather[0].main}
      </p>
    `;
  }

  document.getElementById("districtWeather").innerHTML = html;
}

/* ================= WEATHER ================= */
async function getWeather() {
  const city = document.getElementById("cityInput").value || "Mumbai";

  const current = await fetch(
    `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${API_KEY}`
  ).then(r => r.json());

  document.getElementById("city").innerText = current.name;
  document.getElementById("temp").innerText = Math.round(current.main.temp) + "¬∞C";
  document.getElementById("desc").innerText = current.weather[0].main;
  document.getElementById("feels").innerText =
    "Feels like " + Math.round(current.main.feels_like) + "¬∞C";

  document.getElementById("humidity").innerText = "üíß Humidity: " + current.main.humidity + "%";
  document.getElementById("wind").innerText = "üå¨ Wind: " + current.wind.speed + " km/h";
  document.getElementById("pressure").innerText = "‚è± Pressure: " + current.main.pressure + " hPa";
  document.getElementById("visibility").innerText =
    "üëÅ Visibility: " + current.visibility / 1000 + " km";

  updateMap(current.coord.lat, current.coord.lon, current.name);
}

/* ================= WEATHER NEWS ================= */
const weatherArticles = [
  {
    title: "IMD issues rainfall alert for multiple Indian states",
    desc: "The India Meteorological Department has forecast heavy rainfall across several regions due to an active monsoon system.",
    tag: "IMD ALERT",
    link: "https://mausam.imd.gov.in/",
  },
  {
    title: "Cyclone threat reduces but coastal regions advised caution",
    desc: "Weather experts advise fishermen and coastal residents to stay alert as sea conditions remain rough.",
    tag: "CYCLONE",
    link: "https://www.ndtv.com/india",
  },
  {
    title: "Heatwave conditions expected in central India this week",
    desc: "Temperatures may rise above normal in parts of Madhya Pradesh and Rajasthan, IMD warns.",
    tag: "HEATWAVE",
    link: "https://www.thehindu.com/news/national/",
  },
  {
    title: "Flood monitoring intensified as rivers cross warning levels",
    desc: "State disaster authorities are monitoring river levels amid continuous rainfall in eastern India.",
    tag: "FLOOD",
    link: "https://indianexpress.com/section/india/",
  }
];

let currentArticleIndex = 0;
let activeArticle = weatherArticles[0];

function showWeatherArticle() {
  activeArticle = weatherArticles[currentArticleIndex];

  document.getElementById("newsTitle").innerText = activeArticle.title;
  document.getElementById("newsDesc").innerText = activeArticle.desc;
  document.getElementById("newsBadge").innerText = activeArticle.tag;

  document.getElementById("newsDate").innerText =
    new Date().toLocaleDateString("en-IN", {
      weekday: "long",
      day: "numeric",
      month: "short",
      year: "numeric"
    });

  currentArticleIndex =
    (currentArticleIndex + 1) % weatherArticles.length;
}

// Auto-rotate every 6 seconds
setInterval(showWeatherArticle, 6000);

// Load immediately on page open
showWeatherArticle();

const weatherNews = [
  {
    title: "IMD Weather Update LIVE",
    videoId: "p7HKvqRI_Bo",
    tag: "LIVE"
  },
  {
    title: "Cyclone & Storm Alert India",
    videoId: "h6G9w5A2CzQ",
    tag: "CYCLONE"
  },
  {
    title: "Monsoon & Flood Situation India",
    videoId: "R9nLkFz0Y8E",
    tag: "FLOOD"
  },
  {
    title: "Heatwave Safety Advisory India",
    videoId: "5pYJrXJ1m5M",
    tag: "HEATWAVE"
  }
];


function loadWeatherNews() {
  const grid = document.getElementById("newsGrid");

  if (!grid) return;

  const today = new Date().toLocaleDateString("en-IN", {
    weekday: "long",
    day: "numeric",
    month: "short",
    year: "numeric"
  });

  grid.innerHTML = "";

  weatherNews.forEach(news => {
    grid.innerHTML += `
      <div class="news-card" onclick="openYT('${news.videoId}')">
        <div class="news-thumb">
          <span class="news-tag">${news.tag}</span>
          <img src="https://img.youtube.com/vi/${news.videoId}/hqdefault.jpg">
          <div class="play-btn">‚ñ∂</div>
        </div>
        <div class="news-info">
          <div class="news-title">${news.title}</div>
          <div class="news-date">${today}</div>
        </div>
      </div>
    `;
  });
}


function openYT(id) {
  window.open(`https://www.youtube.com/watch?v=${id}`, "_blank");
}


/* ================= THEME ================= */
function toggleTheme() {
  document.body.classList.toggle("light");
}

/* ================= INIT ================= */
document.getElementById("date").innerText =
  new Date().toLocaleDateString("en-IN", {
    weekday: "long", year: "numeric", month: "short", day: "numeric"
  });

window.addEventListener("load", () => {
  initIndiaMap();
  loadOtherCities();
  getWeather();
  loadWeatherNews();
});
</script>
<script>
async function getWeather() {
  const city = document.getElementById("cityInput").value || "Mumbai";

  /* CURRENT WEATHER */
  const current = await fetch(
    `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${API_KEY}`
  ).then(r => r.json());

  /* FORECAST (THIS WAS MISSING ‚ùó) */
  const forecast = await fetch(
    `https://api.openweathermap.org/data/2.5/forecast?q=${city}&units=metric&appid=${API_KEY}`
  ).then(r => r.json());

  /* MAIN DATA */
  document.getElementById("city").innerText = current.name;
  document.getElementById("temp").innerText = Math.round(current.main.temp) + "¬∞C";
  document.getElementById("desc").innerText = current.weather[0].main;
  document.getElementById("feels").innerText =
    "Feels like " + Math.round(current.main.feels_like) + "¬∞C";

  /* HIGHLIGHTS */
  document.getElementById("humidity").innerText =
    "üíß Humidity: " + current.main.humidity + "%";
  document.getElementById("wind").innerText =
    "üå¨ Wind: " + current.wind.speed + " km/h";
  document.getElementById("pressure").innerText =
    "‚è± Pressure: " + current.main.pressure + " hPa";
  document.getElementById("visibility").innerText =
    "üëÅ Visibility: " + current.visibility / 1000 + " km";

  /* ================= TODAY / WEEK (FIXED) ================= */
  const hourly = document.getElementById("hourly");
  hourly.innerHTML = "";

  if (forecast.list && forecast.list.length > 0) {
    forecast.list.slice(0, 6).forEach(item => {
      hourly.innerHTML += `
        <div class="hour-card">
          ${item.dt_txt.slice(11, 16)}<br>
          <img src="https://openweathermap.org/img/wn/${item.weather[0].icon}.png">
          ${Math.round(item.main.temp)}¬∞
        </div>
      `;
    });

    const tomorrowItem =
      forecast.list.find(i => i.dt_txt.includes("12:00:00")) ||
      forecast.list[forecast.list.length - 1];

    document.getElementById("tomorrowTemp").innerText =
      Math.round(tomorrowItem.main.temp) + "¬∞";

    document.getElementById("tomorrowDesc").innerText =
      tomorrowItem.weather[0].main;
  }

  /* SUN DATA */
  const sunrise = new Date(current.sys.sunrise * 1000);
  const sunset = new Date(current.sys.sunset * 1000);

  document.getElementById("sunrise").innerText =
    sunrise.toLocaleTimeString("en-IN", { hour: "2-digit", minute: "2-digit" });

  document.getElementById("sunset").innerText =
    sunset.toLocaleTimeString("en-IN", { hour: "2-digit", minute: "2-digit" });

  const diff = current.sys.sunset - current.sys.sunrise;
  document.getElementById("dayLength").innerText =
    Math.floor(diff / 3600) + "h " + Math.floor((diff % 3600) / 60) + "m";

  /* MAP UPDATE */
  updateMap(current.coord.lat, current.coord.lon, current.name);
}
</script>

<script>

/* Easing Count Up */

const counters = document.querySelectorAll('.counter');

function easeOutQuad(t) {
  return t * (2 - t);
}

function animateCounter(counter) {
  const target = +counter.getAttribute('data-target');
  const duration = 2000;
  let start = null;

  function step(timestamp) {
    if (!start) start = timestamp;
    const progress = timestamp - start;
    const percent = Math.min(progress / duration, 1);
    const eased = easeOutQuad(percent);

    counter.innerText = Math.floor(eased * target);

    if (progress < duration) {
      requestAnimationFrame(step);
    } else {
      counter.innerText = target;
    }
  }

  requestAnimationFrame(step);
}

/* Reveal Observer */

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      document.querySelectorAll('.reveal').forEach((el, i) => {
        setTimeout(() => el.classList.add('active'), i * 150);
      });
      counters.forEach(animateCounter);
      observer.disconnect();
    }
  });
}, { threshold: 0.3 });

observer.observe(document.querySelector('.climate-section'));

/* Live Clock */

function updateTime() {
  const now = new Date();
  document.getElementById('liveTime').innerText =
    now.toLocaleTimeString();
}
setInterval(updateTime, 1000);
updateTime();

/* Dynamic Alerts */
let activeAlertCount = 2; // connect with your real disaster data
document.getElementById('activeAlerts').innerText = activeAlertCount;

</script>
</body>
</html>
